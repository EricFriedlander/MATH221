---
title: "Lesson 2: Study Design"
output: learnr::tutorial
runtime: shiny_prerendered
---

```{r setup, include=FALSE}
library(learnr)
knitr::opts_chunk$set(echo = FALSE)
```


## Sample and Population Questions

### Sleeping in college

A recent article in a college newspaper stated that college students get an average of 5.5 hours of sleep each night. A student who was skeptical about this value decided to conduct a survey by randomly sampling 25 students. On average, the sampled students slept 6.25 hours per night. Identify which value represents the sample mean and which value represents the claimed population mean.

```{r sleeping-in-college, echo=FALSE}
quiz(
  caption="Sleeping in college",
  question_numeric("Sample mean",
                   answer(6.25, correct = TRUE),
                   allow_retry = TRUE),
  question_numeric("Claimed Population Mean",
                   answer(5.5, correct = TRUE),
                   allow_retry = TRUE)
)
```

### Cheaters, scope of inference

Researchers studying the relationship between honesty, age and self-control conducted an experiment on 160 children between the ages of 5 and 15. The researchers asked each child to toss a fair coin in private and to record the outcome (white or black) on a paper sheet and said they would only reward children who report white. Half the students were explicitly told not to cheat, and the others were not given any explicit instructions. Differences were observed in the cheating rates in the instruction and no instruction groups, as well as some differences across children’s characteristics within each group. (Bucciol and Piovesan 2011)

```{r cheaters, echo=FALSE}
quiz(
  caption="Cheaters",
  question_radio("Identify the population of interest in this study.",
                   answer("All human beings"),
                   answer("All children"),
                   answer("All children between the ages of 5 and 15", correct = TRUE),
                   answer("160 children between the ages of 5 and 15"),
                   allow_retry = TRUE),
  question_radio("Identify the sample in this study.",
                   answer("All human beings"),
                   answer("All children"),
                   answer("All children between the ages of 5 and 15"),
                   answer("160 children between the ages of 5 and 15", correct = TRUE),
                   allow_retry = TRUE)
)
```

Comment on whether the results of the study can be generalized to the population, and if the findings of the study can be used to establish causal relationships.

```{r cheater-generalization, exercise=TRUE}
# Answer: 
```

```{r cheater-generalization-solution}
# Answer: If the children in this sample, who are likely not randomly sampled, 
# can be considered to be representative of all children between the ages of 5 
# and 15, then the results are generalizable to the population defined above. 
# Additionally, since the study is experimental, the findings can be used to 
# establish causal relationships.
```

### Cats on YouTube

Suppose you want to estimate the percentage of videos on YouTube that are cat videos. It is impossible for you to watch all videos on YouTube, so you use a random video picker to select 1000 videos for you. You find that 2% of these videos are cat videos. Determine which of the following is an observation, a variable, a sample statistic, or a population parameter.

```{r cats, echo=FALSE}
quiz(
  caption="Cats on Youtube",
  question_radio("Percentage of all videos on YouTube that are cat videos.",
                 answer("Observation"),
                 answer("Variable"),
                 answer("Sample Statistic"),
                 answer("Population Parameter", correct = TRUE),
                 allow_retry = TRUE),
  question_radio("2%.",
                 answer("Observation"),
                 answer("Variable"),
                 answer("Sample Statistic", correct = TRUE),
                 answer("Population Parameter"),
                 allow_retry = TRUE),
  question_radio("A video in your sample.",
                 answer("Observation", correct = TRUE),
                 answer("Variable"),
                 answer("Sample Statistic"),
                 answer("Population Parameter"),
                 allow_retry = TRUE),
  question_radio("Whether a video is a cat video.",
                 answer("Observation"),
                 answer("Variable", correct = TRUE),
                 answer("Sample Statistic"),
                 answer("Population Parameter"),
                 allow_retry = TRUE)
)
```

## Types of Study and Sampling Questions

### Course satisfaction across sections.

A large college class has 160 students. All 160 students attend the lectures together, but the students are divided into 4 groups, each of 40 students, for lab sections administered by different teaching assistants. The professor wants to conduct a survey about how satisfied the students are with the course, and he believes that the lab section a student is in might affect the student’s overall satisfaction with the course.

```{r course-satisfaction}
quiz(
  caption = "Course satisfaction across sections",
  question_radio("What type of study is this?",
                 answer("Experiment"),
                 answer("Observational Study", correct = TRUE),
                 allow_retry = TRUE),
  question_radio("What sampling strategy would be best for carrying out this study.",
                 answer("Simple random sampling", message = "Not quite! With SRS we can't ensure that all section are represented."),
                 answer("Stratified sampling where each section is a strata", correct = TRUE, message = "The professor suspects students in a given section may have similar feelings about a course. To ensure each section is reasonably represented, she may choose to randomly select a fixed number of students, say 10, from each section for a total sample size of 40 students. Since a random sample of fixed size was taken within each section in this scenario, this represents a stratified sampling."),
                 answer("Cluster sampling where each section is a cluster", message = "Sorry! If we suspect that the section impacts performance then the clusters wouldn't resemble one another."),
                  answer("Multistage sampling where each section is a cluster", message = "Sorry! If we suspect that the section impacts performance then the clusters wouldn't resemble one another."),
                 allow_retry = TRUE)
)
```


### Stressed out

A study that surveyed a random sample of otherwise healthy high school students found that they are more likely to get muscle cramps when they are stressed. The study also noted that students drink more coffee and sleep less when they are stressed.

```{r stressed, echo=FALSE}
quiz(
  caption="Stressed out",
  question_radio("What type of study is this?",
                 answer("Experiment"),
                 answer("Observational Study", correct = TRUE),
                 allow_retry = TRUE),
  question_radio("Can this study be used to conclude a causal relationship between increased stress and muscle cramps?",
                 answer("Yes", message="Since the study is observational we cannot infer causation."),
                 answer("No", correct=TRUE, message="Since the study is observational we cannot infer causation."),
                 allow_retry = TRUE),
  question_checkbox("Which of the following are possible confounding variables that might explain the observed relationship between increased stress and muscle cramps?",
                    answer("Stress"),
                    answer("Muscle Cramps"),
                    answer("Caffeine", correct = TRUE),
                    answer("Lack of sleep", correct = TRUE),
                    allow_retry = TRUE,
                    random_answer_order = TRUE)
  
)
```

### Sampling strategies. 

A statistics student who is curious about the relationship between the amount of time students spend on social networking sites and their performance at school decides to conduct a survey. Various research strategies for collecting data are described below. In each, name the sampling method proposed and any bias you might expect.

They randomly sample 40 students from the study’s population, give them the survey, ask them to fill it out and bring it back the next day.

```{r sampling1, exercise=TRUE}
# Answer:
```

```{r sampling1-solution}
# Answer: Simple random sample. Non-response bias, if only those people who have strong opinions about the survey responds their sample may not be representative of the population.

```


They give out the survey only to their friends, making sure each one of them fills out the survey.

```{r sampling2, exercise=TRUE}
# Answer:
```

```{r sampling2-solution}
# Answer: Convenience sample. Their sample may not be representative of the population since it consists only of their friends. This is called "under coverage bias". It is also possible that the study will have non-response bias if some choose to not bring back the survey.
```

They randomly sample 5 classes and asks a random sample of students from those classes to fill out the survey.

```{r sampling3, exercise=TRUE}
# Answer:
```

```{r sampling3-solution}
# Answer: Multi-stage sampling. If the classes are similar to each other with respect to student composition this approach should not introduce bias, other than potential non-response bias.
```




### Evaluate sampling methods. 

A university wants to determine what fraction of its undergraduate student body support a new $25 annual fee to improve the student union. 

```{r evaluate-sampling-method, echo=FALSE}
question_checkbox("Select each method which is reasonable.",
                  answer("Survey a simple random sample of 500 students.", message = "Simple random sampling is okay. In fact, it’s rare for simple random sampling to not be a reasonable sampling method!", correct=TRUE),
                  answer("Stratify students by their field of study, then sample 10% of students from each stratum.", message = "The student opinions may vary by field of study, so the stratifying by this variable makes sense and would be reasonable.", correct=TRUE),
                  answer("Cluster students by their ages (e.g., 18 years old in one cluster, 19 years old in one cluster, etc.), then randomly sample three clusters and survey all students in those clusters.", message="Students of similar ages are probably going to have more similar opinions, and we want clusters to be diverse with respect to the outcome of interest, so this would not be a good approach. (Additional thought: the clusters in this case may also have very different numbers of people, which can also create unexpected sample sizes.)", correct=FALSE),
                  allow_retry = TRUE
)
```


## Haters are gonna hate, study confirms. 

A study published in the Journal of Personality and Social Psychology asked a group of 200 randomly sampled participants recruited online using Amazon’s Mechanical Turk to evaluate how they felt about various subjects, such as camping, health care, architecture, taxidermy, crossword puzzles, and Japan in order to measure their attitude towards mostly independent stimuli. Then, they presented the participants with information about a new product: a microwave oven. This microwave oven does not exist, but the participants didn’t know this, and were given three positive and three negative fake reviews. People who reacted positively to the subjects on the dispositional attitude measurement also tended to react positively to the microwave oven, and those who reacted negatively tended to react negatively to it. Researchers concluded that “some people tend to like things, whereas others tend to dislike things, and a more thorough understanding of this tendency will lead to a more thorough understanding of the psychology of attitudes.” (Hepler and Albarracı́n 2013)

What are the cases?

```{r haters-cases, exercise=TRUE}
# Answer: 
```

```{r haters-cases-solution}
# Answer: The cases are 200 randomly sampled men and women.
```

What is (are) the response variable(s) in this study?

```{r haters-response, exercise=TRUE}
# Answer: 
```

```{r haters-response-solution}
# Answer: The response variable is attitude towards a fictional microwave oven.
```

What is (are) the explanatory variable(s) in this study?

```{r haters-explanatory, exercise=TRUE}
# Answer: 
```

```{r haters-explanatory-solution}
# Answer: The explanatory variable is dispositional attitude.
```

```{r haters-question, echo=FALSE}
quiz(
  caption="Haters Gonna Hate",
  question_radio("Does the study employ random sampling?", 
           answer("Yes", correct=TRUE, message="The cases are sampled randomly, recruited online using Amazon’s Mechanical Turk."),
           answer("No", message="The cases are sampled randomly, recruited online using Amazon’s Mechanical Turk.")),
  question_radio("Is this an observational study or an experiment?",
                 answer("Experiement", message="This is an observational study since there is no random assignment to treatments."),
                 answer("Observational Study", correct=TRUE, message="This is an observational study since there is no random assignment to treatments."),
                 allow_retry = TRUE),
  question_radio("Can we establish a causal link between the explanatory and response variables?",
                 answer("Yes", message="We cannot establish a causal link between the explanatory and response variables since the study is observational."),
                 answer("No", message="We cannot establish a causal link between the explanatory and response variables since the study is observational.", correct=TRUE),
                 allow_retry = TRUE),
  question_radio("Can the results of the study be generalized to the population at large?",
                 answer("Yes", message="The results of the study can be generalized to the population at large since the sample is random.", correct=TRUE),
                 answer("No", message="The results of the study can be generalized to the population at large since the sample is random."))
)
```


## Exercise and mental health. 

A researcher is interested in the effects of exercise on mental health, and they propose the following study: use stratified random sampling to ensure representative proportions of 18-30, 31-40 and 41-55 year-olds from the population. Next, randomly assign half the subjects from each age group to exercise twice a week and instruct the rest not to exercise. Conduct a mental health exam at the beginning and at the end of the study and compare the results.

```{r exercise-q1, echo=FALSE}
question_radio("What type of study is this?",
               answer("Experiement", correct=TRUE),
               answer("Observational Study"))
```


What are the treatment and control groups in this study?

```{r exercise-treatment, exercise=TRUE}
# Answer: 
```

```{r exercise-treatment-solution}
# Answer: The treatment is exercise twice a week and control is no exercise.
```

Does this study make use of blocking? If so, what is the blocking variable?

```{r exercise-blocking, exercise=TRUE}
# Answer: 
```

```{r exercise-blocking-solution}
# Answer: Yes, the blocking variable is age.
```

Does this study make use of blinding?

```{r exercise-blinding, exercise=TRUE}
# Answer: 
```

```{r exercise-blinding-solution}
# Answer: No, the study is not blinded since the patients will know whether or not they are exercising.
```

Comment on whether the results of the study can be used to establish a causal relationship between exercise and mental health and indicate whether the conclusions can be generalized to the population at large.

```{r exercise-causal, exercise=TRUE}
# Answer: 
```

```{r exercise-causal-solution}
# Answer: Since this is an experiment, we can make a causal statement. Since the sample is random, the causal statement can be generalized to the population at large. However, we should be cautious about making a causal statement because of a possible placebo effect.
```

Suppose you are given the task of determining if this proposed study should get funding. Would you have any reservations about the study proposal?

```{r exercise-fund, exercise=TRUE}
# Answer: 
```

```{r exercise-fund-solution}
# Answer: It would be very difficult, if not impossible, to successfully conduct this study since randomly sampled people cannot be required to participate in a clinical trial.
```


## City council survey. 

A city council has requested a household survey be conducted in a suburban area of their city. The area is broken into many distinct and unique neighborhoods, some including large homes, some with only apartments, and others a diverse mixture of housing structures. For each part below, identify the sampling methods described, and describe the statistical pros and cons of the method in the city’s context.


Randomly sample 200 households from the city.

```{r city-council1, exercise=TRUE}
# Answer: 
```

```{r city-council1-solution}
# Answer: Simple random sampling. This is usually an effective method as it assigns equal probability to each household to be picked.

```


Divide the city into 20 neighborhoods, and sample 10 households from each neighborhood.

```{r city-council2, exercise=TRUE}
# Answer: 
```

```{r city-council2-solution}
# Answer: Stratified sampling. This is an effective method in this setting since neighborhoods are unique and this method allows us to sample from each neighborhood.
```

Divide the city into 20 neighborhoods, randomly sample 3 neighborhoods, and then sample all households from those 3 neighborhoods.

```{r city-council3, exercise=TRUE}
# Answer: 
```

```{r city-council3-solution}
# Answer: Cluster sampling. This is not an effective method in this setting since the resulting sample will not contain households from certain neighborhoods and we are told that some neighborhoods are very different from others.
```

Divide the city into 20 neighborhoods, randomly sample 8 neighborhoods, and then randomly sample 50 households from those neighborhoods.

```{r city-council4, exercise=TRUE}
# Answer: 
```

```{r city-council4-solution}
# Answer: Multi-stage sampling. This method will suffer from the same issue discussed in the previous question.
```

Sample the 200 households closest to the city council offices.

```{r city-council5, exercise=TRUE}
# Answer: 
```

```{r city-council5-solution}
# Answer: Convenience sampling. This is not an effective method since it will result in a biased sample for households that are similar to each other (in the same neighborhood) and the sample will not contain any houses from neighborhoods far from the city council offices.
```


